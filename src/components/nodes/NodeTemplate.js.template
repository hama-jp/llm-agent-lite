import { createNodeDefinition } from './types.js';

/**
 * [ãƒãƒ¼ãƒ‰å]ãƒãƒ¼ãƒ‰ã®å®Ÿè¡Œå‡¦ç†
 * @param {Object} node - ãƒãƒ¼ãƒ‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 * @param {Object} inputs - å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒãƒ¼ãƒˆåã‚’ã‚­ãƒ¼ã¨ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
 * @param {Object} context - å®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
 * @param {Object} context.variables - ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å¤‰æ•°
 * @param {Function} context.addLog - ãƒ­ã‚°è¿½åŠ é–¢æ•°
 * @returns {Promise<any>} å‡¦ç†çµæœ
 */
async function execute[ãƒãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¹å]Node(node, inputs, context) {
  // ã“ã“ã«å®Ÿéš›ã®å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°
  
  // å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ä¾‹
  const inputValue = inputs['input_port_name'] || '';
  
  // è¨­å®šå€¤ã®å–å¾—ä¾‹
  const setting = node.data.settingName || 'default';
  
  // ãƒ­ã‚°å‡ºåŠ›ä¾‹
  context.addLog('info', 'å‡¦ç†ã‚’é–‹å§‹ã—ã¾ã—ãŸ', node.id, { inputValue, setting });
  
  // å¤‰æ•°ã®èª­ã¿æ›¸ãä¾‹
  const myVar = context.variables['variableName'];
  context.variables['newVariable'] = 'newValue';
  
  // å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®å‘¼ã³å‡ºã—ä¾‹ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
  // const { default: someService } = await import('../../services/someService.js');
  // const result = await someService.doSomething(inputValue);
  
  // å‡¦ç†çµæœã‚’è¿”ã™
  return inputValue; // ã¾ãŸã¯å‡¦ç†ã—ãŸçµæœ
}

/**
 * [ãƒãƒ¼ãƒ‰å]ãƒãƒ¼ãƒ‰ã®å®šç¾©
 * [ãƒãƒ¼ãƒ‰ã®æ©Ÿèƒ½èª¬æ˜]
 */
export const [ãƒãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¹å]Node = createNodeDefinition(
  '[è¡¨ç¤ºå]',
  '[ã‚¢ã‚¤ã‚³ãƒ³çµµæ–‡å­—]',
  '[è‰²ãƒ†ãƒ¼ãƒ]', // orange, blue, green, teal, pink, purple, amber, cyan ã‹ã‚‰é¸æŠ
  ['[å…¥åŠ›ãƒãƒ¼ãƒˆå]'], // å…¥åŠ›ãƒãƒ¼ãƒˆé…åˆ—ï¼ˆå¿…è¦ã«å¿œã˜ã¦è¤‡æ•°æŒ‡å®šï¼‰
  ['[å‡ºåŠ›ãƒãƒ¼ãƒˆå]'], // å‡ºåŠ›ãƒãƒ¼ãƒˆé…åˆ—ï¼ˆå¿…è¦ã«å¿œã˜ã¦è¤‡æ•°æŒ‡å®šï¼‰
  {
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿
    // ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
  },
  execute[ãƒãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¹å]Node, // å®Ÿè¡Œãƒ¡ã‚½ãƒƒãƒ‰
  {
    description: '[ãƒãƒ¼ãƒ‰ã®è©³ç´°èª¬æ˜]',
    category: '[ã‚«ãƒ†ã‚´ãƒªãƒ¼å]' // æ—¢å­˜: input-output, ai, text-processing, control-flow, variables
  }
);

export default [ãƒãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¹å]Node;

/*
æ–°ã—ã„ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹æ‰‹é †ï¼š
1. ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
2. [ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼]ã‚’é©åˆ‡ãªå€¤ã«ç½®ãæ›ãˆ
3. src/components/nodes/index.js ã«importæ–‡ã¨exportã‚’è¿½åŠ 
4. å¿…è¦ã«å¿œã˜ã¦nodesByCategory ã«ã‚‚è¿½åŠ 
5. NodeEditorã§æ–°ã—ã„ãƒãƒ¼ãƒ‰ãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™

ä¾‹ï¼š
export const HttpRequestNode = createNodeDefinition(
  'HTTP Request',
  'ğŸŒ',
  'blue',
  ['url', 'method', 'body'],
  ['response', 'error'],
  {
    method: 'GET',
    headers: {},
    timeout: 5000
  },
  {
    description: 'HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦å¿œç­”ã‚’å–å¾—ã—ã¾ã™',
    category: 'network'
  }
);
*/